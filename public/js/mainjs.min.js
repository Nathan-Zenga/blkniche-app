$(function(){function e(){window.pageYOffset>40?$("#toTop").css({transform:"translateX(-100%)"}):$("#toTop").css({transform:""});try{window.pageYOffset>$("section").eq(1).offset().top-100?$(".inner-header").hasClass("fixed")||$(".inner-header").addClass("fixed"):$(".inner-header").removeClass("fixed")}catch(e){console.log(e)}}function t(){$("nav .link").css({borderBottom:""}),window.innerWidth>768&&$("section").each(function(e){if($(window).scrollTop()>=$(this).offset().top-100){var t=$(this);$("nav .link").css({borderBottom:""}).each(function(){$(this).attr("id")===t.attr("class")&&$(this).css({borderBottom:"2px solid white"})})}})}Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!!(this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2)}}),e(),t(),$(".musicTitle").text($(".music .item.active .carousel-caption-title").text()),$(".musicArtist").text($(".music .item.active .carousel-caption-artist").text()),$(".videoTitle").text($(".videos .item.active .carousel-caption-title").text()),$(".videoArtist").text($(".videos .item.active .carousel-caption-artist").text()),$(".videoInfo").text($(".videos .item.active .carousel-caption-info").text()),$(".modal").on("shown.bs.modal",function(){$("body, .modal").css({paddingRight:""})}),$("#bgreel > div:gt(0)").hide(),setInterval(function(){$("#bgreel > div:first").delay(1e3).fadeOut(2e3).next().fadeIn(2e3).end().appendTo("#bgreel")},4e3),$("section").each(function(){$(this).css({backgroundColor:function(){for(var e=[],t=0;t<3;t++)e.push(Math.floor(255*Math.random()));return e="rgb("+e.join(",")+")"}()})}),$("#menu").click(function(){$(".link-group").fadeToggle(function(){"none"==$(this).css("display")&&$(this).css("display","")}),"none"==$(".link").css("display")?($(".inner-header").css("box-shadow","none"),$(".link").each(function(e){$(this).delay(200*e).fadeIn()})):($(".inner-header").css("box-shadow",""),$(".link").fadeOut(function(){$(this).css("display","")}))}),$(".link").click(function(){window.innerWidth<=768&&$("#menu").click();try{var e=$(this).attr("id");$("html, body").stop().animate({scrollTop:$("section."+e).offset().top},700)}catch(e){console.log("Section doesn't exist OR registration modal is now open")}}),$("#toTop, #header-logo").click(function(){"header-logo"!==this.id||$(".home, .index").length?($("html, body").stop().animate({scrollTop:0},700),$(".inner-header").css("box-shadow",""),window.innerWidth<=768&&$(".link-group, .link").fadeOut(function(){$(this).css("display","")})):location.pathname="/"}),$(".carousel").carousel({interval:!1}),$(".carousel-indicators > li").click(function(){$(this).closest("section").find(".carousel").carousel($(this).index())}),$(".left").click(function(){$($(this).closest("section").get(0)).find(".carousel").carousel("prev")}),$(".right").click(function(){$($(this).closest("section").get(0)).find(".carousel").carousel("next")}),$(".carousel-indicators > li, .left, .right").click(function(){if($(this).closest(".carousel").find(".item.active video").length)for(var e=0;e<$(this).closest(".carousel").find("video").length;e++)$(this).closest(".carousel").find("video").get(e).pause(),$(this).closest(".carousel").find("video").get(e).currentTime=0;var t,i,o;t=$(".music .item.active .carousel-caption-title").text(),i=$(".videos .item.active .carousel-caption-title").text(),o=setInterval(function(){t!==$(".music .item.active .carousel-caption-title").text()?($(".musicTitle").text($(".music .item.active .carousel-caption-title").text()),$(".musicArtist").text($(".music .item.active .carousel-caption-artist").text()),clearInterval(o)):i!==$(".videos .item.active .carousel-caption-title").text()&&($(".videoTitle").text($(".videos .item.active .carousel-caption-title").text()),$(".videoArtist").text($(".videos .item.active .carousel-caption-artist").text()),$(".videoInfo").text($(".videos .item.active .carousel-caption-info").text()),$(".videos").find(".item.active video").length&&$(".videos .item.active video").get(0).play(),clearInterval(o))})});var i=!0;$("video").attr({oncontextmenu:"return false"}).css({cursor:"pointer"}).click(function(){i?($(this).get(0).pause(),i=!1):($(this).get(0).play(),i=!0)});try{window.pageYOffset>$("section.videos").offset().top-$("section.videos").height()/4&&window.pageYOffset<=$("section.videos").offset().top+$("section.videos").height()/2&&!$(".videos .item.active video").get(0).playing&&$(".videos .item.active video").get(0).play()}catch(e){console.log(e)}$("#signup_body .submit").click(function(e){e.preventDefault();var t=$("#signup_body .details"),i={};t.each(function(){var e=$(this).attr("name");i[e]=$(this).val()}),$.ajax({type:"post",url:"/users/register",contentType:"application/json",data:JSON.stringify(i),success:function(e,i){for(k in $(".result").empty(),e)e[k]="<p>"+e[k]+"</p>";e.login_error&&$("#signup_body .result").append(e.login_error),e.login_error_chars&&$("#signup_body .result").append(e.login_error_chars),e.success_msg&&($("#signup_body .result").html(e.success_msg),t.val(""))},error:function(e,t,i){console.log("ERROR: "+i),console.log("jqHXR: "+e),console.log("status: "+t)}})}),$("#update-form .submit").click(function(e){e.preventDefault();var t=$("#update-form .details"),i={};t.each(function(){var e=$(this).attr("name");i[e]=$(this).val()}),$.ajax({type:"post",url:"/users/update",contentType:"application/json",data:JSON.stringify(i),success:function(e,i){if($(".result").empty(),/Incorrect|Please fill/.test(e))e="<p>"+e+"</p>",$("#update-form .result").append(e),$("#update-form input[name='old_password']").val(""),$("#update-form input[name='new_password']").val("");else{var o="<li>Name: "+e.name+"</li><li>Email: "+e.email+"</li><li>Date of birth: "+e.DOB+"</li><li>Nationality: "+e.nationality+"</li><br>";$(".profile-info span").html(o),$("#update-form .close").click(),t.val("")}},error:function(e,t,i){console.log("ERROR: "+i),console.log("jqHXR: "+e),console.log("status: "+t)}})}),$("modal-header > *").click(function(){$(".result").empty(),$(".details").val("")}),$(window).scroll(function(){e(),t(),window.pageYOffset<$("section.videos").offset().top-$("section.videos").height()/4||window.pageYOffset>=$("section.videos").offset().top+$("section.videos").height()/2?$(".videos .item.active video").get(0).playing&&($(".videos .item.active video").get(0).pause(),$(".videos .item.active video").get(0).currentTime=0):$(".videos .item.active video").get(0).play()})});