$(function(){function t(){window.pageYOffset>40?$("#toTop").css({transform:"translateX(-100%)"}):$("#toTop").css({transform:""});try{window.pageYOffset>$("section").eq(1).offset().top-100?$(".inner-header").hasClass("fixed")||$(".inner-header").addClass("fixed"):$(".inner-header").removeClass("fixed")}catch(t){console.log(t)}}function e(){$("nav .link").css({borderBottom:""}),window.innerWidth>768&&$("section").each(function(t){if($(window).scrollTop()>=$(this).offset().top-100){var e=$(this);$("nav .link").css({borderBottom:""}).each(function(){$(this).attr("id")===e.attr("class")&&$(this).css({borderBottom:"2px solid white"})})}})}Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!!(this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2)}}),t(),e(),$(".musicTitle").text($(".music .item.active .carousel-caption-title").text()),$(".musicArtist").text($(".music .item.active .carousel-caption-artist").text()),$(".videoTitle").text($(".videos .item.active .carousel-caption-title").text()),$(".videoArtist").text($(".videos .item.active .carousel-caption-artist").text()),$(".videoInfo").text($(".videos .item.active .carousel-caption-info").text()),$(".modal").on("shown.bs.modal",function(){$("body, .modal").css({paddingRight:""})}),$("#bgreel > div:gt(0)").hide(),setInterval(function(){$("#bgreel > div:first").delay(1e3).fadeOut(2e3).next().fadeIn(2e3).end().appendTo("#bgreel")},4e3),$("section").each(function(){$(this).css({backgroundColor:function(){for(var t=[],e=0;e<3;e++)t.push(Math.floor(255*Math.random()));return t="rgb("+t.join(",")+")"}()})}),$("#menu").click(function(){$(".link-group").fadeToggle(function(){"none"==$(this).css("display")&&$(this).css("display","")}),"none"==$(".link").css("display")?($(".inner-header").css("box-shadow","none"),$(".link").each(function(t){$(this).delay(200*t).fadeIn()})):($(".inner-header").css("box-shadow",""),$(".link").fadeOut(function(){$(this).css("display","")}))}),$(".link").click(function(){window.innerWidth<=768&&$("#menu").click();try{var t=$(this).attr("id");$("html, body").stop().animate({scrollTop:$("section."+t).offset().top},700)}catch(t){console.log("Section doesn't exist OR registration modal is now open")}}),$("#toTop, #header-logo").click(function(){"header-logo"!==this.id||$(".home, .index").length?($("html, body").stop().animate({scrollTop:0},700),$(".inner-header").css("box-shadow",""),window.innerWidth<=768&&$(".link-group, .link").fadeOut(function(){$(this).css("display","")})):location.pathname="/"}),$(".carousel").carousel({interval:!1}),$(".carousel-indicators > li").click(function(){$(this).closest("section").find(".carousel").carousel($(this).index())}),$(".left").click(function(){$($(this).closest("section").get(0)).find(".carousel").carousel("prev")}),$(".right").click(function(){$($(this).closest("section").get(0)).find(".carousel").carousel("next")}),$(".carousel-indicators > li, .left, .right").click(function(){if($(this).closest(".carousel").find(".item.active video").length)for(var t=0;t<$(this).closest(".carousel").find("video").length;t++)$(this).closest(".carousel").find("video").get(t).pause(),$(this).closest(".carousel").find("video").get(t).currentTime=0;var e,i,o;e=$(".music .item.active .carousel-caption-title").text(),i=$(".videos .item.active .carousel-caption-title").text(),o=setInterval(function(){e!==$(".music .item.active .carousel-caption-title").text()?($(".musicTitle").text($(".music .item.active .carousel-caption-title").text()),$(".musicArtist").text($(".music .item.active .carousel-caption-artist").text()),clearInterval(o)):i!==$(".videos .item.active .carousel-caption-title").text()&&($(".videoTitle").text($(".videos .item.active .carousel-caption-title").text()),$(".videoArtist").text($(".videos .item.active .carousel-caption-artist").text()),$(".videoInfo").text($(".videos .item.active .carousel-caption-info").text()),$(".videos").find(".item.active video").length&&$(".videos .item.active video").get(0).play(),clearInterval(o))})});var i=!0;$("video").attr({oncontextmenu:"return false"}).css({cursor:"pointer"}).click(function(){i?($(this).get(0).pause(),i=!1):($(this).get(0).play(),i=!0)});try{window.pageYOffset>$("section.videos").offset().top-$("section.videos").height()/4&&window.pageYOffset<=$("section.videos").offset().top+$("section.videos").height()/2&&!$(".videos .item.active video").get(0).playing&&$(".videos .item.active video").get(0).play()}catch(t){console.log(t)}$("#signup_body .submit").click(function(t){t.preventDefault();var e=$("#signup_body .details"),i={};e.each(function(){var t=$(this).attr("name");i[t]=$(this).val()}),$.ajax({type:"post",url:"/users/register",contentType:"application/json",data:JSON.stringify(i),success:function(t,i){$(".result").empty(),(t=t.split(" ... ")).forEach(function(t){(t="<p>"+t+"</p>").includes("registered")&&e.val(""),$("#signup_body .result").append(t)})},error:function(t,e,i){console.log("ERROR: "+i),console.log("jqHXR: "+t),console.log("status: "+e)}})}),$("#update-form .submit").click(function(t){t.preventDefault();var e=$("#update-form .details"),i={};e.each(function(){var t=$(this).attr("name");i[t]=$(this).val()}),$.ajax({type:"post",url:"/users/update",contentType:"application/json",data:JSON.stringify(i),success:function(t,i){if($(".result").empty(),/Incorrect|Please fill/.test(t))t="<p>"+t+"</p>",$("#update-form .result").append(t),$("#update-form input[name='old_password']").val(""),$("#update-form input[name='new_password']").val("");else{var o="<li>Name: "+(t=JSON.parse(t)).name+"</li><li>Email: "+t.email+"</li><li>Date of birth: "+t.DOB+"</li><li>Nationality: "+t.nationality+"</li><br>";$(".profile-info span").html(o),$("#update-form .close").click(),e.val("")}},error:function(t,e,i){console.log("ERROR: "+i),console.log("jqHXR: "+t),console.log("status: "+e)}})}),$(window).scroll(function(){t(),e(),window.pageYOffset<$("section.videos").offset().top-$("section.videos").height()/4||window.pageYOffset>=$("section.videos").offset().top+$("section.videos").height()/2?$(".videos .item.active video").get(0).playing&&($(".videos .item.active video").get(0).pause(),$(".videos .item.active video").get(0).currentTime=0):$(".videos .item.active video").get(0).play()})});